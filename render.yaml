services:
  # Service 1: Gemini Coaching API
  # This service handles the AI nutrition advice
  - type: web
    name: nutrivision-gemini-api
    env: python
    buildCommand: pip install -r backend/requirements.txt
    startCommand: gunicorn -w 4 -b 0.0.0.0:$PORT backend.gemini_server:app
    envVars:
      - key: GEMINI_API_KEY
        sync: false

  # Service 2: Food Recognition Model API
  # This service handles image prediction using TensorFlow
  - type: web
    name: nutrivision-model-api
    env: python
    buildCommand: pip install -r backend/requirements.txt
    startCommand: gunicorn -w 1 -b 0.0.0.0:$PORT backend.model_server:app
